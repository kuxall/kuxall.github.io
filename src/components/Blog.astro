---
interface BlogPost {
  title: string;
  excerpt: string;
  date: string;
  readTime: string;
  slug: string;
  image?: string;
  category?: string;
}

interface Props {
  posts?: BlogPost[];
}

const { posts = [] } = Astro.props;

// Sample blog posts - you can replace with real data
const samplePosts: BlogPost[] = [
  {
    title: "Building Budgetly: AI-Powered Financial Management with GPT-4 Vision",
    excerpt: "How I built an intelligent expense tracking app using FastAPI, React, and OpenAI's GPT-4 Vision for receipt OCR processing and financial insights.",
    date: "January 15, 2025",
    readTime: "15 min read",
    slug: "building-budgetly-ai-financial-management",
    image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=2070&auto=format&fit=crop",
    category: "AI_ENGINEERING"
  },
  {
    title: "TaskFlow: Modern Task Management with ASP.NET Core and SignalR",
    excerpt: "Creating a real-time task management web app with ASP.NET Core MVC, Entity Framework, and SignalR for live notifications and collaboration.",
    date: "December 20, 2024", 
    readTime: "12 min read",
    slug: "taskflow-aspnet-core-signalr",
    image: "https://images.unsplash.com/photo-1484480974693-6ca0a78fb36b?q=80&w=2072&auto=format&fit=crop",
    category: "WEB_DEV"
  }
];

const displayPosts = posts.length > 0 ? posts : samplePosts;
---

<section id="blog" class="section relative overflow-hidden bg-[#0a0a0f]">
  <!-- Grid Background -->
  <div class="absolute inset-0 opacity-5" 
       style="background-image: linear-gradient(rgba(0, 255, 255, 0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 255, 0.3) 1px, transparent 1px); background-size: 40px 40px;">
  </div>

  <div class="container relative z-10">
    <div class="text-center mb-16">
      <div class="inline-block mb-4">
        <span class="badge badge-primary">
          <span class="animate-pulse mr-2">●</span>
          NEURAL_ARCHIVES
        </span>
      </div>
      <h2 class="section-title">
        <span class="neon-text">KNOWLEDGE_BASE</span>
      </h2>
      <p class="text-gray-400 font-mono max-w-2xl mx-auto">
        > DECRYPTING THOUGHTS AND TUTORIALS...
      </p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
      {displayPosts.map((post, index) => (
        <article class={`group relative reveal stagger-${(index % 3) + 1}`}>
          <!-- Holographic Card -->
          <div class="relative bg-gray-900 border border-gray-800 rounded-lg overflow-hidden hover:border-cyan-500/50 transition-all duration-300 h-full flex flex-col">
            <!-- Image Container -->
            <div class="relative h-48 overflow-hidden">
              <div class="absolute inset-0 bg-cyan-500/20 mix-blend-overlay z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              <img 
                src={post.image} 
                alt={post.title}
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500 filter grayscale group-hover:grayscale-0"
              />
              <!-- Glitch Overlay -->
              <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent opacity-80"></div>
              
              <div class="absolute bottom-4 left-4 right-4 flex justify-between items-end z-20">
                <span class="text-xs font-mono text-cyan-400 bg-black/50 px-2 py-1 rounded border border-cyan-500/30 backdrop-blur-sm">
                  {post.category || 'TECH_LOG'}
                </span>
                <span class="text-xs font-mono text-gray-400">
                  {post.date}
                </span>
              </div>
            </div>

            <div class="p-6 flex-1 flex flex-col relative">
              <!-- Scanline -->
              <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-cyan-500 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

              <h3 class="text-xl font-bold text-white font-orbitron mb-3 group-hover:text-cyan-400 transition-colors line-clamp-2">
                <a href={`/blog/${post.slug}`} class="focus:outline-none">
                  <span class="absolute inset-0"></span>
                  {post.title}
                </a>
              </h3>
              
              <p class="text-gray-400 text-sm mb-4 line-clamp-3 flex-1">
                {post.excerpt}
              </p>
              
              <div class="flex items-center justify-between pt-4 border-t border-gray-800 mt-auto">
                <div class="flex items-center gap-2 text-xs font-mono text-gray-500">
                  <span class="text-cyan-500">⏱</span>
                  {post.readTime}
                </div>
                <span class="text-cyan-400 text-sm font-mono group-hover:translate-x-1 transition-transform duration-300">
                  READ_FILE >>
                </span>
              </div>
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>