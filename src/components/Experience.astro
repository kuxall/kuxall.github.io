---
interface ExperienceItem {
  title: string;
  company: string;
  location: string;
  period: string;
  responsibilities: string[];
}

interface Props {
  experiences: ExperienceItem[];
}

const { experiences } = Astro.props;
---

<section id="experience" class="section relative overflow-hidden bg-[#050508]">
  <div class="container relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <div class="inline-block mb-4">
        <span class="badge badge-primary">
          <span class="animate-pulse mr-2">●</span>
          CAREER_LOGS
        </span>
      </div>
      <h2 class="section-title">
        <span class="neon-text-purple">PROFESSIONAL_HISTORY</span>
      </h2>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="relative space-y-12">
        <!-- Vertical Timeline Line -->
        <div class="absolute left-8 top-0 bottom-0 w-px bg-gradient-to-b from-cyan-500 via-purple-500 to-transparent hidden md:block"></div>

        {experiences.map((exp, index) => (
          <div class={`relative pl-0 md:pl-24 reveal stagger-${(index % 3) + 1}`}>
            <!-- Timeline Node -->
            <div class="absolute left-6 top-0 w-4 h-4 rounded-full bg-[#0a0a0f] border-2 border-cyan-500 hidden md:block z-10 shadow-[0_0_10px_rgba(0,255,255,0.5)]">
              <div class="absolute inset-0 rounded-full bg-cyan-500 animate-ping opacity-20"></div>
            </div>
            
            <!-- Date Badge (Desktop) -->
            <div class="absolute left-0 top-0 -translate-x-[140%] hidden md:block text-right w-32">
              <span class="text-cyan-400 font-mono text-sm border border-cyan-500/30 px-2 py-1 rounded bg-cyan-900/10">
                {exp.period}
              </span>
            </div>

            <!-- Content Card -->
            <div class="relative group">
              <div class="absolute -inset-0.5 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-lg opacity-20 group-hover:opacity-100 transition duration-500 blur"></div>
              
              <!-- Terminal Window -->
              <div class="relative bg-[#0c0c0c] border border-gray-800 rounded-lg overflow-hidden hover:border-cyan-500/50 transition-all duration-300 shadow-2xl font-mono group-hover:shadow-[0_0_30px_rgba(0,255,255,0.1)]">
                
                <!-- Terminal Header -->
                <div class="bg-[#1a1a1a] px-4 py-2 flex items-center justify-between border-b border-gray-800">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 rounded-full bg-red-500/80"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
                  </div>
                  <div class="text-xs text-gray-500 font-mono">root@portfolio:~/experience</div>
                  <div class="w-12"></div>
                </div>

                <!-- Terminal Body -->
                <div class="p-6 space-y-4">
                  <!-- Command Input -->
                  <div class="flex flex-wrap items-center gap-2 text-sm">
                    <span class="text-green-500">➜</span>
                    <span class="text-cyan-500">~</span>
                    <span class="text-gray-300">./show_job.sh</span>
                    <span class="text-yellow-300">--company "{exp.company}"</span>
                  </div>

                  <!-- Output Content -->
                  <div class="pl-4 border-l-2 border-gray-800 space-y-3 text-sm">
                    <div class="grid grid-cols-[100px_1fr] gap-2">
                      <span class="text-gray-500">Role:</span>
                      <span class="text-cyan-300 font-bold">{exp.title}</span>
                    </div>
                    
                    <div class="grid grid-cols-[100px_1fr] gap-2">
                      <span class="text-gray-500">Location:</span>
                      <span class="text-purple-300">{exp.location}</span>
                    </div>

                    <div class="mt-4">
                      <div class="text-gray-500 mb-2"># Responsibilities:</div>
                      <ul class="space-y-2">
                        {exp.responsibilities.map((item) => (
                          <li class="flex items-start gap-2 text-gray-300">
                            <span class="text-cyan-500 mt-1">>></span>
                            <span>{item}</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  </div>

                  <!-- Blinking Cursor -->
                  <div class="flex items-center gap-2 text-sm mt-4">
                    <span class="text-green-500">➜</span>
                    <span class="text-cyan-500">~</span>
                    <span class="w-2 h-4 bg-gray-500 animate-pulse"></span>
                  </div>
                </div>

                <!-- Scanline Overlay -->
                <div class="absolute inset-0 bg-gradient-to-b from-transparent via-white/5 to-transparent translate-y-[-100%] group-hover:translate-y-[100%] transition-transform duration-1000 pointer-events-none mix-blend-overlay"></div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
